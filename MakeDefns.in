

# these are common definitions that the Makefile in
# each subdirectory includes

SHELL = /bin/sh

# C++ source files
CPPSRC = $(shell cd ../src; ls *.cpp 2> /dev/null)

# C source files
CSRC =  $(shell cd ../src; ls *.c 2> /dev/null)


# C++ header files

CPPHEADER = $(shell cd ../include; ls *.hpp 2> /dev/null)

# C header files

CHEADER = $(shell cd ../include; ls *.h 2> /dev/null)

# All header files

ALLHEADER = $(CPPHEADER) $(CHEADER)


# Include path
INCPATH = -I../include $(patsubst %, -I../../%/include, $(DEPENDMODS))

# Library path
LIBPATH = $(patsubst %, -L../../%/obj, $(DEPENDMODS))

# library linking options
LIBFLAGS = $(patsubst %, -l%, $(DEPENDMODS))

# module library name
OBJLIBS = $(foreach dir, $(DEPENDMODS), ../../$(dir)/obj/lib$(dir).a)

# C++ objects
CPPOBJ = $(CPPSRC:.cpp=.o) 

# C objects
COBJ = $(CSRC:.c=.o)

# all objects
OBJ = $(CPPOBJ) $(COBJ)

# library name for a module 
# "MODULE" defined in the Makefile of a subdirectory
OBJLIB = lib$(MODULE).a

# C compiler and compiling options
#
# configure script will replace @CC@ with the right value
CC = @CC@

# CFLAGS = $(INCPATH) -g -c -O -Wall

# configure script will replace @CFLAGS@ and @CPPFLAGS@ with the right values

CFLAGS = -D_CCVER=$(CCVER) $(INCPATH) @CFLAGS@ @CPPFLAGS@

# C++ compiler and compiling/linking options
# configure script will replace @CXX@ with the right value

CXX = @CXX@

# CPPFLAGS    = $(INCPATH) -fnonnull-objects -fguiding-decls -c -g -Wall

# configure script will replace @CXXFLAGS@ and @CPPFLAGS@ with the right values

CPPFLAGS    = -D_CXXVER=$(CXXVER) $(INCPATH) @CXXFLAGS@ @CPPFLAGS@

CPPLDFLAGS  =   $(LIBPATH) $(LIBFLAGS) -lm

CCVER = $(shell $(CC) --version | sed 's/\.//g')

CXXVER = $(shell $(CXX) --version |sed 's/\.//g')


  










